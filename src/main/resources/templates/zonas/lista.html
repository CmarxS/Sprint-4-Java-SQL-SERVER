<!DOCTYPE html>
<html lang="pt-br"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/header :: head('Zonas Virtuais')}"></head>
<body>
<div th:replace="~{fragments/menu :: menu('zonas')}"></div>

<main class="wrap">
    <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
            <h2>Zonas Virtuais</h2>

            <!-- Botão Nova Zona só ADMIN -->
            <span sec:authorize="hasRole('ADMIN')">
        <a class="btn primary" th:href="@{/zonas/novo}">Nova Zona</a>
      </span>
        </div>

        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Descrição</th>
                <th>Ações</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="z : ${zonas}">
                <td th:text="${z.id}">1</td>
                <td th:text="${z.nome}">Pátio A</td>
                <td th:text="${z.tipo}">OPERACIONAL</td>
                <td th:text="${z.descricao}">Área principal</td>

                <td class="actions">
                    <!-- Ações só ADMIN -->
                    <span sec:authorize="hasRole('ADMIN')">
            <a th:href="@{|/zonas/editar/${z.id}|}">Editar</a>
            <a th:href="@{|/zonas/excluir/${z.id}|}"
               onclick="return confirm('Confirma excluir?')">Excluir</a>
          </span>

                    <!-- Operador vê apenas traço -->
                    <span sec:authorize="!hasRole('ADMIN')">-</span>
                </td>
            </tr>

            <tr th:if="${#lists.isEmpty(zonas)}">
                <td colspan="5">Nenhum registro.</td>
            </tr>
            </tbody>
        </table>
    </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
